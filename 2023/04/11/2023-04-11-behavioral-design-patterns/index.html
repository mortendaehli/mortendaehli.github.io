<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Object oriented design patterns - Behavioral patterns (Part 3) &#183; Morten Dæhli Aslesen</title><meta name=description content="The Gang of Four's classic behavioral design patterns."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.111.3"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Object oriented design patterns - Behavioral patterns (Part 3)"><meta property="og:description" content="The Gang of Four's classic behavioral design patterns."><meta property="og:type" content="article"><meta property="og:url" content="https://www.daehli.no/2023/04/11/2023-04-11-behavioral-design-patterns/"><link rel=stylesheet href=https://www.daehli.no/dist/site.css><link rel=stylesheet href=https://www.daehli.no/dist/syntax.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link rel=icon type=image/x-icon href=/img/favicon.png></head><body><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://www.daehli.no/>Morten Dæhli Aslesen</a></h1><a class=button-square href=https://www.daehli.no/index.xml aria-label=RSS><i class="fa fa-rss" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Facebook aria-label=Facebook href=https://www.facebook.com/morten.aslesen/ rel=me><i class="fa fa-facebook" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Github aria-label=Github href=https://github.com/mortendaehli/ rel=me><i class="fa fa-github-alt" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=LinkedIn aria-label=LinkedIn href=https://www.linkedin.com/in/morten-d%C3%A6hli-aslesen-50765164/ rel=me><i class="fa fa-linkedin" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Email aria-label="Send an Email" href=mailto:mortendaehli@gmail.com><i class="fa fa-envelope" aria-hidden=true></i></a></div><ul class=site-nav><li class=site-nav-item><a href=/>Blog</a></li><li class=site-nav-item><a href=/project/>Projects</a></li><li class=site-nav-item><a href=/page/reading-list/>Reading list</a></li><li class=site-nav-item><a href=/page/contact/>Contact</a></li><li class=site-nav-item><a href=/page/about/>About</a></li></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Object oriented design patterns - Behavioral patterns (Part 3)</h1><p class=post-description itemprop=description>The Gang of Four's classic behavioral design patterns.</p><p class=post-date><span>Published <time datetime=2023-04-11 itemprop=datePublished>Tue, Apr 11, 2023</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=%f0%9f%91%8b%20Hi,%20I%e2%80%99m%20Morten%20D%c3%a6hli%20Aslesen,%20and%20I%27m%20currently%20working%20as%20an%20IT-consultant%20at%20Bouvet%20Norway%20ASA itemprop=url rel=author>Morten Dæhli Aslesen</a></span></span></p><p class="post-reading post-line"><span>Estimated reading time: 6 min</span></p></header><div class="post-content clearfix" itemprop=articleBody><p>This is the third and last part in a series of 3 blog post summarizing the famous
by Gamma, Helm, Johnson and Vlissides, also known as the Gang of Four.</p><h2 id=behavioral-pattern>Behavioral Pattern</h2><p>Behavioral design patterns in software development are design patterns that focus on the communication between objects
and how they interact to achieve a specific behavior or functionality. These patterns are concerned with the
interactions and responsibilities of objects, and how they work together to accomplish a common goal.</p><h3 id=chain-of-responsibility-pattern>Chain of Responsibility Pattern</h3><p>The Chain of Responsibility pattern allows a group of objects to handle a request in a chain-like sequence.
When a request is made, it is passed through the chain of objects until one of them handles the request.
Each object in the chain has the option to handle the request or pass it on to the next object in the chain.
This allows for more flexibility in handling requests, as well as reducing coupling between objects.</p><p>The Chain of Responsibility Pattern consists of the following components:</p><ul><li><strong>Handler</strong>: Defines an interface for handling requests and optionally implements the successor link to the next
handler in the chain.</li><li><strong>ConcreteHandler</strong>: Implements the Handler interface and handles requests that it is responsible for. If it cannot
handle the request, it passes it on to the next handler in the chain.</li><li><strong>Client</strong>: Initiates the request to the first handler in the chain.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Handler</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>successor</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Handler</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_successor</span> <span class=o>=</span> <span class=n>successor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>handled</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>process</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>handled</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_successor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_successor</span><span class=o>.</span><span class=n>handle</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Request: </span><span class=si>{</span><span class=n>request</span><span class=si>}</span><span class=s2> did not get handled by the chain of responsibility.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConcreteHandlerA</span><span class=p>(</span><span class=n>Handler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span> <span class=o>==</span> <span class=s1>&#39;request1&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Handling request 1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConcreteHandlerB</span><span class=p>(</span><span class=n>Handler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span> <span class=o>==</span> <span class=s1>&#39;request2&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Handling request 2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConcreteHandlerC</span><span class=p>(</span><span class=n>Handler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span> <span class=o>==</span> <span class=s1>&#39;request3&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Handling request 3&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Client</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>handler</span> <span class=o>=</span> <span class=n>ConcreteHandlerA</span><span class=p>(</span><span class=n>ConcreteHandlerB</span><span class=p>(</span><span class=n>ConcreteHandlerC</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>make_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>handler</span><span class=o>.</span><span class=n>handle</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span> <span class=o>=</span> <span class=n>Client</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>make_request</span><span class=p>(</span><span class=s1>&#39;request1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>make_request</span><span class=p>(</span><span class=s1>&#39;request2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>make_request</span><span class=p>(</span><span class=s1>&#39;request3&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>make_request</span><span class=p>(</span><span class=s1>&#39;request4&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Handling request 1
</span></span><span class=line><span class=cl>Handling request 2
</span></span><span class=line><span class=cl>Handling request 3
</span></span><span class=line><span class=cl>Request: request4 did not get handled by the chain of responsibility.
</span></span></code></pre></div><h3 id=command-pattern>Command Pattern</h3><p>The Command pattern is a behavioral design pattern that encapsulates a request as an object, thereby letting you
parameterize clients with different requests, queue or log requests, and support undoable operations. In other words,
the Command pattern decouples the object that invokes an operation from the one that knows how to perform it.</p><p>The Command Pattern consists of the following components:</p><ul><li><strong>Command</strong>: Defines the interface for executing a command.</li><li><strong>ConcreteCommand</strong>: Implements the Command interface and defines a binding between a receiver object and an action.</li><li><strong>Receiver</strong>: Knows how to perform the operations associated with carrying out a request.</li><li><strong>Invoker</strong>: Holds a command and at some point asks the command to carry out a request.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Command</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SimpleCommand</span><span class=p>(</span><span class=n>Command</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>receiver</span><span class=p>:</span> <span class=n>Receiver</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span> <span class=o>=</span> <span class=n>receiver</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;SimpleCommand: executing using </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span><span class=o>.</span><span class=n>do_something_simple</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ComplexCommand</span><span class=p>(</span><span class=n>Command</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>receiver</span><span class=p>:</span> <span class=n>Receiver</span><span class=p>,</span> <span class=n>a</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span> <span class=o>=</span> <span class=n>receiver</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_a</span> <span class=o>=</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_b</span> <span class=o>=</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ComplexCommand: executing a more complex command using </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span><span class=o>.</span><span class=n>do_something_complex</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_receiver</span><span class=o>.</span><span class=n>do_something_else_complex</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Receiver</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>do_something_simple</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> doing something simple.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>do_something_complex</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>a</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> doing something complex with variable </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>do_something_else_complex</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> doing something else complex with variable </span><span class=si>{</span><span class=n>b</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Invoker</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_on_start</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>_on_finish</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_on_start</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=n>Command</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_on_start</span> <span class=o>=</span> <span class=n>command</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_on_finish</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=n>Command</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_on_finish</span> <span class=o>=</span> <span class=n>command</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_start</span><span class=p>,</span> <span class=n>Command</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_on_start</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_finish</span><span class=p>,</span> <span class=n>Command</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_on_finish</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>invoker</span> <span class=o>=</span> <span class=n>Invoker</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>receiver</span> <span class=o>=</span> <span class=n>Receiver</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>invoker</span><span class=o>.</span><span class=n>set_on_start</span><span class=p>(</span><span class=n>SimpleCommand</span><span class=p>(</span><span class=n>receiver</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>invoker</span><span class=o>.</span><span class=n>set_on_finish</span><span class=p>(</span><span class=n>ComplexCommand</span><span class=p>(</span><span class=n>receiver</span><span class=p>,</span> <span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>invoker</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>SimpleCommand: executing using Receiver
</span></span><span class=line><span class=cl>Receiver doing something simple.
</span></span><span class=line><span class=cl>ComplexCommand: executing a more complex command using Receiver
</span></span><span class=line><span class=cl>Receiver doing something complex with variable a
</span></span><span class=line><span class=cl>Receiver doing something else complex with variable b
</span></span></code></pre></div><h3 id=interpreter-pattern>Interpreter Pattern</h3><p>The Interpreter pattern defines a grammar for a language and provides an interpreter
to interpret and execute expressions in that language. The pattern is useful when there is a need to evaluate
expressions or parse complex grammars.</p><p>The Interpreter Pattern consists of the following components:</p><ul><li><strong>AbstractExpression</strong>: Defines an interface for interpreting expressions.</li><li><strong>TerminalExpression</strong>: Implements the AbstractExpression interface and represents a terminal expression in the
grammar.</li><li><strong>NonterminalExpression</strong>: Implements the AbstractExpression interface and represents a non-terminal expression in
the grammar.</li><li><strong>Context</strong>: Contains information that is global to the interpreter.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Context</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stack</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>push</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stack</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>stack</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AbstractExpression</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>interpret</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Number</span><span class=p>(</span><span class=n>AbstractExpression</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Terminal Expression</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>interpret</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=o>.</span><span class=n>push</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Add</span><span class=p>(</span><span class=n>AbstractExpression</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Non-Terminal Expression</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>left</span><span class=p>,</span> <span class=n>right</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>left</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>right</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>interpret</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>left</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>interpret</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>right</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>interpret</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>left</span> <span class=o>+</span> <span class=n>right</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=o>.</span><span class=n>push</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=si>}</span><span class=s2> + </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Subtract</span><span class=p>(</span><span class=n>AbstractExpression</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Non-Terminal Expression</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>left</span><span class=p>,</span> <span class=n>right</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>left</span> <span class=o>=</span> <span class=n>left</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>right</span> <span class=o>=</span> <span class=n>right</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>interpret</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>left</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=o>.</span><span class=n>interpret</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>right</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=o>.</span><span class=n>interpret</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>left</span> <span class=o>-</span> <span class=n>right</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=o>.</span><span class=n>push</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>left</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>right</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span> <span class=o>=</span> <span class=n>Context</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>expressions</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>Number</span><span class=p>(</span><span class=mi>7</span><span class=p>),</span>  <span class=c1># 7</span>
</span></span><span class=line><span class=cl>        <span class=n>Number</span><span class=p>(</span><span class=mi>5</span><span class=p>),</span>  <span class=c1># 5</span>
</span></span><span class=line><span class=cl>        <span class=n>Add</span><span class=p>(</span><span class=n>Number</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span> <span class=n>Number</span><span class=p>(</span><span class=mi>2</span><span class=p>)),</span>  <span class=c1># 3 + 2 = 5</span>
</span></span><span class=line><span class=cl>        <span class=n>Subtract</span><span class=p>(</span><span class=n>Number</span><span class=p>(</span><span class=mi>7</span><span class=p>),</span> <span class=n>Number</span><span class=p>(</span><span class=mi>5</span><span class=p>)),</span>  <span class=c1># 7 - 5 = 2</span>
</span></span><span class=line><span class=cl>        <span class=n>Add</span><span class=p>(</span><span class=n>Number</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span> <span class=n>Subtract</span><span class=p>(</span><span class=n>Number</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span> <span class=n>Number</span><span class=p>(</span><span class=mi>1</span><span class=p>)))</span>  <span class=c1># 3 + (2 - 1) = 4</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>expression</span> <span class=ow>in</span> <span class=n>expressions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>expression</span><span class=o>.</span><span class=n>interpret</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Expression: </span><span class=si>{</span><span class=n>expression</span><span class=si>}</span><span class=s2> evaluates to &#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Expression: 7 evaluates to  7
</span></span><span class=line><span class=cl>Expression: 5 evaluates to  5
</span></span><span class=line><span class=cl>Expression: 3 + 2 evaluates to  5
</span></span><span class=line><span class=cl>Expression: 7 - 5 evaluates to  2
</span></span><span class=line><span class=cl>Expression: 3 + 2 - 1 evaluates to  4
</span></span></code></pre></div><h3 id=iterator-pattern>Iterator Pattern</h3><p>The Iterator Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=mediator-pattern>Mediator Pattern</h3><p>The Mediator Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=memento-pattern>Memento Pattern</h3><p>The Memento Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=observer-pattern>Observer Pattern</h3><p>The Observer Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=state-pattern>State Pattern</h3><p>The State Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=strategy-pattern>Strategy Pattern</h3><p>The Strategy Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=template-method-pattern>Template method Pattern</h3><p>The Template method Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h3 id=visitor-pattern>Visitor Pattern</h3><p>The Visitor Pattern consists of the following components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python></code></pre></div><p>This will output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text></code></pre></div><h2 id=see-also>See also</h2><ul><li><a href=/2023/04/09/2023-04-09-creational-design-patterns/>Design Patters Part 1 - Creational Patters</a></li><li><a href=/2023/04/10/2023-04-10-structural-design-patterns/>Design Patters Part 2 - Structural Patters</a></li><li><a href=#>Design Patters Part 3 - Behavioral Patters</a></li></ul></div><footer class="post-footer clearfix"><p class=post-tags><span>Tagged:</span>
<a href=/tags/software-design/>software design</a>,
<a href=/tags/object-oriented-programming/>object-oriented programming</a></p><div class=share><a class=icon-twitter href="https://twitter.com/share?text=Object%20oriented%20design%20patterns%20-%20Behavioral%20patterns%20%28Part%203%29&url=https%3a%2f%2fwww.daehli.no%2f2023%2f04%2f11%2f2023-04-11-behavioral-design-patterns%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=235"),!1' aria-label="Share on Twitter"><i class="fa fa-twitter" aria-hidden=true></i></a>
<a class=icon-facebook href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.daehli.no%2f2023%2f04%2f11%2f2023-04-11-behavioral-design-patterns%2f" onclick='return window.open(this.href,"facebook-share","width=580,height=296"),!1' aria-label="Share on Facebook"><i class="fa fa-facebook" aria-hidden=true></i></a>
<a class=icon-linkedin href="https://www.linkedin.com/shareArticle?mini=true&title=Object%20oriented%20design%20patterns%20-%20Behavioral%20patterns%20%28Part%203%29&url=https%3a%2f%2fwww.daehli.no%2f2023%2f04%2f11%2f2023-04-11-behavioral-design-patterns%2f&summary=The%20Gang%20of%20Four%27s%20classic%20behavioral%20design%20patterns." onclick='return window.open(this.href,"linkedin-share","width=554,height=481"),!1' aria-label="Share on LinkedIn"><i class="fa fa-linkedin" aria-hidden=true></i></a></div></footer></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://www.daehli.no/>Morten Dæhli Aslesen</a></h1><a class="button-square button-jump-top js-jump-top" href=# aria-label="Back to Top"><i class="fa fa-angle-up" aria-hidden=true></i></a></div><p class=footer-copyright><span>&copy; 2023 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span><a href=https://github.com/roryg/ghostwriter>Ghostwriter theme</a> By <a href=http://jollygoodthemes.com>JollyGoodThemes</a></span>
<span>/ <a href=https://github.com/jbub/ghostwriter>Ported</a> to Hugo By <a href=https://github.com/jbub>jbub</a></span></p></div></footer><script src=https://www.daehli.no/js/jquery-1.11.3.min.js></script>
<script src=https://www.daehli.no/js/jquery.fitvids.js></script>
<script src=https://www.daehli.no/js/scripts.js></script></body></html>